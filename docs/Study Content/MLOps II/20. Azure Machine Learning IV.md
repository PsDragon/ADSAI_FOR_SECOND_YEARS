---
sort: 19
---

# Azure Machine Learning Monitoring 👀 (work in progress 🚧)

Monitoring deployed machine learning models is an integral part of Machine Learning Operations (MLOps). Think of it as keeping track of your model's "health." 🩺👩‍⚕️ Just like how we have regular check-ups to maintain our health, machine learning models need regular check-ups too. In this module we well explore the why and how of monitoring machine learning models in production.

After completing this module, you will be able to:

- [ ] Understand the importance of monitoring machine learning models in production.
- [ ] Monitor machine learning models using Azure Machine Learning.
- [ ] Monitor machine learning models using Azure Application Insights.
- [ ] Monitor machine learning models using Azure Monitor.

## Why Monitor Machine Learning Models?

As mentioned above, machine learning models are not "set it and forget it" tools. 🔄 They need to be monitored to ensure they continue to perform well over time. This is especially important for models that are deployed in production. Here are some reasons why:

- 1️⃣ **Model Performance Decay**: ML models aren't "set it and forget it" tools. 🔄 Over time, the data they were trained on may no longer be relevant, causing the model's performance to decay. Imagine a model trained to predict fashion trends based on data from 2010. If it's 2023, the model might suggest that we all start wearing Ugg boots and trucker hats again! 🤷‍♂️👢🧢 Fashion has changed, so the model's predictions are out of date.

- 2️⃣ **Data Drift**: Sometimes, the input data changes over time. This change is known as "data drift." For instance, suppose you've developed an ML model to predict the price of avocados 🥑 based on features like season, region, and demand. If the factors influencing the price change (like a sudden avocado craze), the model might start to predict inaccurate results.

- 3️⃣ **Concept Drift**: Similar to data drift, the underlying patterns that the model learned can change over time, causing a phenomenon called "concept drift." Let's say you trained a model to predict popular baby names. 👶 If a new celebrity emerges with a unique name, the pattern of what constitutes a "popular name" might change!

- 4️⃣ **Unexpected Errors**: Unexpected events can cause errors in your model's performance. 😲 Let's say you're running a movie recommendation model and a new film gets released. If there's a bug in the way new films are added to your database, your model might not handle it correctly.

So, how do we monitor these models to ensure they stay in top shape? Here's what you should keep an eye on:

- 🅰️ **Model Performance Metrics**: These include measures like accuracy, precision, recall, F1-score, Area Under the ROC curve (AUC-ROC) for classification tasks, or Mean Squared Error (MSE), Mean Absolute Error (MAE) for regression tasks. If these start to fall, your model might be getting "sick." 🌡️ 

- 🅱️ **Input Data Monitoring**: Keep an eye on the features that your model is receiving as inputs. Are these inputs changing over time (data drift)? Are they outside the range your model was trained on (outliers)? 📊📈

- 🅲️ **Output Data Monitoring**: Monitor the predictions your model is making. Are there sudden changes? Are you seeing an increase in a certain type of prediction? Are the predictions becoming less confident? 📉🔍

- 🅳️ **System Metrics**: These include metrics like prediction latency (how long it takes to make a prediction), throughput (how many predictions can be made in a given time), memory usage, and CPU usage. 🖥️⏳ If these start to spike, there could be a problem with your system!

To summarize, monitoring your deployed machine learning models is vital to ensure they continue to perform well over time. As a data scientist or machine learning engineer, you should be keeping an eye on both your model's health and the health of the system it's running on. 🏥👀 Always remember, a model is only as good as its latest check-up! 🌟

## 1. Monitoring the Health of Your Model 🩺👩‍⚕️

## 2. Monitoring the Health of Your System 🏥👀









## Should Monitor 2 main things Model Performance and Infrastructure Performance

Do a basic intro on why monitoring is important and then give links to azure resources. They can figure out the rest themselves.

Once your digit prediction model is up and running, predicting digits for users, you'll want to monitor its performance. This is where Azure's monitoring services come in.

---> monitoring endpoints
---> Advnaced: Azure Monitor stuff, custom metrics, monitor azure machine learning admin one
---> Advnaced data drift

Appplication insights - https://learn.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview?tabs=net

- [Monitoring](#monitoring)
  - [Azure Service Metrics](#azure-service-metrics)
  - [Azure Application Insights](#azure-application-insights)
  - [Log Analytics](#log-analytics)
  - [Alerts](#alerts)
  - [Deployment Scaling](#deployment-scaling)

- This is good stuff - https://learn.microsoft.com/en-us/training/modules/monitor-models-with-azure-machine-learning/

- General monitoring of all azure resources: https://learn.microsoft.com/en-us/azure/machine-learning/monitor-azure-machine-learning?view=azureml-api-2 - focussed on admins maybe additional resource

- Monitor online endpoints: https://learn.microsoft.com/en-us/azure/machine-learning/how-to-monitor-online-endpoints?view=azureml-api-2 - good reseource

- Monitor data drift: https://learn.microsoft.com/en-us/training/modules/monitor-data-drift-with-azure-machine-learning/

Advanced - https://learn.microsoft.com/en-us/azure/machine-learning/how-to-use-event-grid?view=azureml-api-2

costs - https://learn.microsoft.com/en-us/azure/machine-learning/how-to-view-online-endpoints-costs?view=azureml-api-2

Azure monitor - https://learn.microsoft.com/en-us/azure/azure-monitor/overview

Absolutely, let's expand on modules 3, 5, and 6:

---

**Monitoring with Azure Machine Learning**


- **Introduction to Monitoring in MLOps:** Explain the importance of monitoring for efficient and reliable model operation, touching upon various types of monitoring (system, data, model performance, etc).

- **How Azure Machine Learning supports Monitoring:** Overview of Azure Machine Learning's monitoring capabilities. Discuss how Azure ML allows monitoring of machine learning models, experiments, datasets and more.

- **Model Monitoring with Azure ML:** Deep-dive into monitoring machine learning models in production. Discuss how to set up monitoring, how to use metrics explorer in Azure ML Studio, how to capture and analyze metrics.

- **Real-time monitoring with Azure Machine Learning:** Discuss the concept of real-time monitoring, its benefits, and how it can be done using Azure ML. Include examples of real-time monitoring scenarios.

- **Introduction to Azure Application Insights:** Briefly introduce Azure Application Insights, its main features, and why it's useful for monitoring.

- **Integration of Azure ML and Azure Application Insights for Monitoring:** Discuss how Azure ML can be integrated with Azure Application Insights. Explain the steps to set up integration and what kind of data can be monitored.

- **Tracking Custom Events with Azure Application Insights:** Teach students how to track custom events in their ML models using Azure Application Insights, how to query the data, and how to set up alerts.

- **Real-time monitoring with Azure Application Insights:** Discuss how to use Azure Application Insights for real-time monitoring. Include examples of real-time monitoring scenarios and how to troubleshoot common issues.


- **Setting Up Azure Machine Learning for Monitoring:** Provide a step-by-step guide on how to set up Azure Machine Learning for monitoring. Include how to set up an Azure ML workspace, how to create a compute instance, and how to configure monitoring settings.

- **Monitoring Data Drift with Azure Machine Learning: A Step-by-step Tutorial:** Detailed walkthrough of how to set up and monitor data drift using Azure ML. Include how to create a Data Drift Detector, how to configure it, and how to interpret the results.

- **Hands-On: Integrating Azure ML and Azure Application Insights for Enhanced Monitoring:** Provide a detailed guide on how to integrate Azure ML and Azure Application Insights. Include how to configure the integration, how to track custom events, and how to set up alerts.

- **Exercise: Create Your Own Monitoring Solution:** Ask students to create their own monitoring solution using Azure ML and Azure Application Insights. They should be able to set up the integration, track custom events, set up alerts, and interpret the results. Provide a sample solution for students to reference if they get stuck.



## Azure Service Metrics

Azure Service Metrics offer an overview of your deployed model's performance, including metrics like the number of requests your model is handling, and the response time for these requests.

## Azure Application Insights

Azure Application Insights offers deeper insight into your deployed models, providing data on request rates, response times, failure rates, and more.

## Log Analytics

Azure Log Analytics offers even deeper insight into your deployed models, providing data on request rates, response times, failure rates, and more.

## Alerts

Azure Alerts allow you to set up alerts for your deployed models, so that you can be notified when something goes wrong.

## Deployment Scaling

Azure Deployment Scaling allows you to scale your deployed models up or down, depending on the demand for your model.


https://learn.microsoft.com/en-us/training/paths/deploy-consume-models-azure-machine-learning/

https://learn.microsoft.com/en-us/azure/machine-learning/tutorial-deploy-model?view=azureml-api-2

To understand the concept of model management and deployment in Azure Machine Learning, please visit [this link](https://learn.microsoft.com/en-us/azure/machine-learning/concept-model-management-and-deployment?view=azureml-api-2).

Azure ACI tutorial:

Azure Web app tutorial:

<img src=https://learn.microsoft.com/en-us/azure/architecture/reference-architectures/ai/_images/ml-ops-python.png#lightbox width="100%"/>


## Advanced

https://learn.microsoft.com/en-us/training/paths/build-first-machine-operations-workflow/

https://learn.microsoft.com/en-us/training/paths/develop-custom-object-detection-models-with-nvidia-and-azure-machine-learning/





https://learn.microsoft.com/en-us/training/modules/intro-to-azure-machine-learning-service/?ns-enrollment-type=learningpath&ns-enrollment-id=learn.data-ai.build-ai-solutions-with-azure-ml-service

https://learn.microsoft.com/en-us/training/modules/train-local-model-with-azure-mls/?ns-enrollment-type=learningpath&ns-enrollment-id=learn.data-ai.build-ai-solutions-with-azure-ml-service

https://learn.microsoft.com/en-us/training/modules/work-with-data-in-aml/?ns-enrollment-type=learningpath&ns-enrollment-id=learn.data-ai.build-ai-solutions-with-azure-ml-service

https://learn.microsoft.com/en-us/training/modules/use-compute-contexts-in-aml/?ns-enrollment-type=learningpath&ns-enrollment-id=learn.data-ai.build-ai-solutions-with-azure-ml-service

https://learn.microsoft.com/en-us/training/modules/create-pipelines-in-aml/?ns-enrollment-type=learningpath&ns-enrollment-id=learn.data-ai.build-ai-solutions-with-azure-ml-service


Additional Resources:
https://drivendata.co/blog/missing-guide-to-azureml-part1-setting-up-your-azureml-workspace


https://learn.microsoft.com/en-us/training/modules/intro-to-azure-machine-learning-service/?WT.mc_id=azureml_tutorials


Full AML course: https://learn.microsoft.com/en-us/training/paths/build-ai-solutions-with-azure-ml-service/